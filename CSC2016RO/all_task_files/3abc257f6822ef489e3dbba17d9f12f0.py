IyEvdXNyL2Jpbi9weXRob24KCmltcG9ydCBiYXNlNjQsIFNvY2tldFNlcnZlciwgb3MsIHN5cywg
aGFzaGxpYgpmcm9tIENyeXB0by5QdWJsaWNLZXkgaW1wb3J0IFJTQQoKZGVmIHRleHRfdG9fbnVt
KHMpOgoJcmV0dXJuIGludChzLmVuY29kZSgnaGV4JyksIDE2KQoKClBMQUlOX0ZMQUcgPSBvcGVu
KCJmbGFnLnR4dCIsICJyIikucmVhZCgpLnN0cmlwKCkKCgoKY2xhc3MgU2VydmVySGFuZGxlcihT
b2NrZXRTZXJ2ZXIuQmFzZVJlcXVlc3RIYW5kbGVyKToKCiAgICBkZWYgZmFpbChzZWxmLCBtZXNz
YWdlKToKICAgICAgICBzZWxmLnJlcXVlc3Quc2VuZGFsbChtZXNzYWdlICsgIlxuR29vZC1ieWUu
XG4iKQogICAgICAgIHNlbGYucmVxdWVzdC5jbG9zZSgpCiAgICAgICAgcmV0dXJuIEZhbHNlCgog
ICAgZGVmIGNhcHRjaGEoc2VsZik6CiAgICAgICAgcHJvb2YgPSBiYXNlNjQuYjY0ZW5jb2RlKG9z
LnVyYW5kb20oOSkpCiAgICAgICAgc2VsZi5yZXF1ZXN0LnNlbmRhbGwocHJvb2YpCiAgICAgICAg
dGVzdCA9IHNlbGYucmVxdWVzdC5yZWN2KDIwKQogICAgICAgIGhhID0gaGFzaGxpYi5zaGExKCkK
ICAgICAgICBoYS51cGRhdGUodGVzdCkKICAgICAgICBpZiB0ZXN0WzA6MTJdICE9IHByb29mIG9y
IG5vdCBoYS5kaWdlc3QoKS5lbmRzd2l0aCgnXHhGRlx4RkZceEZGJyk6CiAgICAgICAgCXNlbGYu
ZmFpbCgiWW91J3JlIGEgcm9ib3QhIikKCWVsc2U6CgkJUE9XX0ZMQUcgPSBvcGVuKCJwb3dfZmxh
Zy50eHQiLCAiciIpLnJlYWQoKS5zdHJpcCgpCgkJc2VsZi5yZXF1ZXN0LnNlbmRhbGwoIllvdSBw
YXNzZWQhICVzXG4iICUgUE9XX0ZMQUcpCgoKICAgIGRlZiB0cmlhbChzZWxmLCBGTEFHLCBOLCBl
LCBkKToKCXNlbGYucmVxdWVzdC5zZW5kYWxsKCJJbnB1dCBhbiBvcGVyYXRpb24gYW5kIGEgbnVt
YmVyIGFuZCB3ZSBzaGFsbCBzZXJ2ZSB5b3UhXG4iKQoJdXNlcl9pbnB1dCA9IHNlbGYucmVxdWVz
dC5yZWN2KDIwNDggKyAyKQoJaWYgdXNlcl9pbnB1dFswOjJdID09ICJFICI6CgkgICAgICAgIGlu
cHV0ID0gaW50KHVzZXJfaW5wdXRbMjpdKQoJCXJlc3VsdCA9IHBvdyhpbnB1dCwgZSwgTikKCSAg
ICAgICAgc2VsZi5yZXF1ZXN0LnNlbmRhbGwoIHN0cihyZXN1bHQpICsgIlxuIiApCgllbGlmIHVz
ZXJfaW5wdXRbMDoyXSA9PSAiRCAiOgoJCWlucHV0ID0gaW50KHVzZXJfaW5wdXRbMjpdKQoJCXJl
c3VsdCA9IHBvdyhpbnB1dCwgZCwgTikgICUgMjU2CgkJcmVzdWx0ID0gaGFzaGxpYi5zaGExKCBz
dHIocmVzdWx0KSApLmhleGRpZ2VzdCgpCgkgICAgICAgIHNlbGYucmVxdWVzdC5zZW5kYWxsKCBz
dHIocmVzdWx0KSArICJcbiIgKQoJZWxzZToKCQlzZWxmLnJlcXVlc3Quc2VuZGFsbCgiV2hhdD9c
biIpCgogICAgZGVmIGhhbmRsZShzZWxmKToKICAgICAgICBzZWxmLmNhcHRjaGEoKQoJRkxBRyA9
IHRleHRfdG9fbnVtKG9zLnVyYW5kb20oMTApICsgUExBSU5fRkxBRyArIG9zLnVyYW5kb20oMTAp
ICkKCXJzYSA9IFJTQS5nZW5lcmF0ZSgxMDI0LCBvcy51cmFuZG9tKQoJTiA9IGdldGF0dHIocnNh
LCduJykKCWUgPSBnZXRhdHRyKHJzYSwnZScpCglkID0gZ2V0YXR0cihyc2EsJ2QnKQoKCWFzc2Vy
dCBwb3coIHBvdygxMjM0LCBlLCBOKSwgZCwgTikgPT0gMTIzNAoKCgliYW5uZXIgPSAiV2VsY29t
ZSB0byBvdXIgZnJlZSBSU0Egc2VydmljZSEgQ3VycmVudGx5IHdlIG9mZmVyIGVuY3J5cHRpb24g
YW5kIG9ubHkgYSBmcmVlIHRyaWFsIGZvciBkZWNyeXB0aW9uIHNvIHlvdSBjYW4gbWVhc3VyZSBw
ZXJmb3JtYW5jZS5cbiIKCWJhbm5lciArPSAiSG93IGFib3V0IGEgZnJlZSBjaXBoZXJ0ZXh0IHRv
bz8gJXNcbiIgJSBwb3coRkxBRywgZSwgTikKCgl0cnk6CgkJc2VsZi5yZXF1ZXN0LnNlbmRhbGwo
YmFubmVyKQoJCXdoaWxlIFRydWU6CgkJICAgICAgICBzZWxmLnRyaWFsKEZMQUcsIE4sIGUsIGQp
CgkKCSAgICAgICAgc2VsZi5yZXF1ZXN0LmNsb3NlKCkKCWV4Y2VwdDoKCQlwYXNzCgoKY2xhc3Mg
VGhyZWFkZWRTZXJ2ZXIoU29ja2V0U2VydmVyLlRocmVhZGluZ01peEluLCBTb2NrZXRTZXJ2ZXIu
VENQU2VydmVyKToKICAgIHBhc3MKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBIT1NU
ID0gc3lzLmFyZ3ZbMV0KICAgIFBPUlQgPSBpbnQoc3lzLmFyZ3ZbMl0pCgogICAgc2VydmVyID0g
VGhyZWFkZWRTZXJ2ZXIoKEhPU1QsIFBPUlQpLCBTZXJ2ZXJIYW5kbGVyKQogICAgc2VydmVyLmFs
bG93X3JldXNlX2FkZHJlc3MgPSBUcnVlCiAgICBzZXJ2ZXIuc2VydmVfZm9yZXZlcigpCg==

